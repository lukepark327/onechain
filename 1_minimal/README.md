# 최소 기능 블록체인
블록체인의 기본 컨셉은 '**지속적으로 성장하는 분산화 데이터베이스**'입니다. 본 정의에 맞게 최소 기능만을 갖춘 블록체인을 만들어봅니다. 향후 기능이 추가됨에 따라, 서비스를 제공할 수 있는 [동작 가능 블록체인](https://github.com/JOYUJEONG/onechain/blob/master/2_drivable/README.md)의 모습을 갖추게 될 것입니다.   
   
그림 1.1은 블록의 기본 구조를 보입니다. 블록체인 구성을 위한 필수 요소만을 포함했음에 유의하십시오. 개발자는 구현하고자 하는 블록체인 코어의 특징에 따라 어떠한 요소라도 블록에 포함할 수 있습니다.
   
## 그림 1.1. 블록 구조
![그림1.1](https://github.com/JOYUJEONG/onechain/blob/master/1_minimal_functional/images/1-1.png)
   
**인덱스**(index)는 블록체인의 높이가 얼마나 높은지를 알 수 있는 척도입니다. 블록체인에서의 '높이'는 곧 '길이'와도 같습니다.   
   
**타임스탬프**(timestamp)는 블록이 생성된 시점의 시간 정보를 담고 있습니다. 현실 세계에서의 타임스탬프는 "2018-08-24 13:44:13"와 같이 일렬의 문자열로 표시되지만, 블록체인을 비롯한 디지털세계에서는 흔히 '유닉스(UNIX) 시간'을 사용합니다. 유닉스 시간은 1970년 1월 1일 00:00:00 시점의 협정 세계표준시(UTC)로부터 경과한 시간을 초로 환산하여 정수로 나타낸 수치입니다. 가령 "2018-08-24 13:44:13"에 해당하는 유닉스 시간은 1535085853입니다.   
   
**데이터**(data)는 블록에 포함된 정보입니다. 사실 데이터 필드에는 트랜잭션만이 아니라 어떠한 데이터라도 담을 수 있습니다. 혹은 프로토콜 설계에 따라 트랜잭션과 그 외의 데이터를 동시에 다룰 수도 있습니다.   
   
**해시**(hash)는 블록체인을 구성하는 여러 블록 중 어느 한 블록을 특징지을 수 있는 식별자와도 같습니다. 블록 내부의 다른 구성요소들로부터 생성된 결과값으로, 이전 해시와 함께 체인 형태 구성에 중대한 역할을 합니다.   
   
**이전 해시**(prev_hash, previous hash)는 이전 블록의 해시값입니다. 이는 이전 블록에 명시적으로 기록되어 있으며 현재 블록으로부터 참조됩니다.   
   
블록 해시는 블록체인 구성에서 가장 중요한 요소 중 하나입니다. 해시는 블록의 모든 데이터를 이용해 생성됩니다. 해시 함수는 입력의 한 비트만 바뀌더라도 해시값이 크게 변하므로, 만일 블록 내부의 정보가 조금이라도 바뀐다면 본래의 해시값이 유효하지 않게 됩니다. 따라서 해시는 블록의 유일한 식별자로 취급할 수 있습니다. 가령 동일한 인덱스의 블록은 동시에 두 개 이상 나타날 수 있으나 각각의 해시는 유일합니다.
   
## 그림 1.2. 블록 해시
![그림1.2](https://github.com/JOYUJEONG/onechain/blob/master/1_minimal_functional/images/1-2.png) 
   
아직 우리의 최소 기능 블록체인에서는 합의를 정의하지 않았습니다. 즉, 작업증명(Proof-of-Work)과 같은 합의 과정이 없습니다. 블록 해시는 오직 무결성 검증과 외부 블록으로부터의 참조 역할만을 담당하고 있습니다.   
   
해시와 이전 해시가 블록의 구성요소로 포함된 이상, 블록을 임의로 위변조하기란 매우 힘든 일입니다. 어느 한 블록의 정보를 변경하고자 한다면 연결된 모든 블록의 해시를 새로 계산해야 합니다. 그림 1.3은 인덱스가 27번인 블록의 데이터를 임의로 변경한 결과입니다. 27번 블록에 연결된 모든 블록의 해시가 변경되었음을 주목하십시오. 만일 더 낮은 인덱스의 블록을 수정하였다면 더 많은 블록의 해시를 계산했어야 할 것입니다. 이는 블록체인의 합의에 있어 매우 중요한 특징입니다.   
   
## 그림 1.3. 블록 변조
![그림1.3](https://github.com/JOYUJEONG/onechain/blob/master/1_minimal_functional/images/1-3.png)
   
**제네시스(Genesis) 블록**은 블록체인의 첫 번째 블록입니다. 인덱스가 0인 블록이라고도 할 수 있습니다. 제네시스 블록은 유일하게 이전 해시가 없는 블록입니다. 블록체인 네트워크에 참여하는 노드(node) 모두가 공통된 제네시스 블록을 참조할 수 있도록, 제네시스 블록은 프로토콜에 하드코딩되어 있습니다.   
   
제네시스 블록의 해시는 하드코딩한 인덱스, 타임스탬프, 이전 해시를 통해 계산합니다.
   
## 그림 1.4. 제네시스 블록
![그림1.4](https://github.com/JOYUJEONG/onechain/blob/master/1_minimal_functional/images/1-4.png)
   
블록을 생성하기 위해서는 우선 이전 블록의 해시값을 알아야 합니다. 또한 인덱스, 타임스탬프, 데이터, 그리고 이들로부터 계산된 해시값을 요구합니다. 개중 블록 데이터는 사용자로부터 주어지는 항목이지만 나머지는 프로그램으로부터 생성됩니다.
